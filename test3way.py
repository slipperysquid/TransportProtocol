
import Receiver
import time
from protocol import Protocol
'''
rec = Receiver.Receiver('127.0.0.1',5000)


rec.listen_for_connection()
data = rec.receive_packet()

with open("test.txt",'wb') as f:
    f.write(data)
    '''

proto = Protocol('0.0.0.0',5001)
conn = proto.accept(4096)
conn.listen()
data = b''
while True:
    try:
        conn.set_timeout(0.5)
        data += conn.receive_data(100000)
    except:
           break
with open("test2.txt",'wb') as f:
            f.write(data)    

#conn.send_data('pooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppooppoop'.encode())